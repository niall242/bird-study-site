{% extends "base.html" %}

{% block content %}
<section class="post-section">
    <h2>All Bird Sightings</h2>

    <!-- Search input -->
    <input type="text" id="search" placeholder="Search posts..." />

    {#
    <!-- Posts container -->
    <div id="post-list">
        <!-- Example post -->
        <div class="post-card">
            <h3>Blackbird spotted in Marend</h3>
            <p><strong>Date:</strong> 2025-04-14 at 07:45</p>
            <p><strong>Activity:</strong> Feeding (15 min)</p>
            <p><strong>Posted by:</strong> nature_lover</p>
            <p>A beautiful blackbird was eating berries near the park.</p>

            <!-- Optional image -->
            <img src="https://source.unsplash.com/300x200/?blackbird" alt="Blackbird">
            
            <!-- Edit/Delete buttons (show only if it's user's post) -->
            <div class="post-actions">
                <button>Edit</button>
                <button>Delete</button>
            </div>


        </div>

        <!-- Add more simulated posts here... -->

    </div>
    #}

    <div id="post-list">
        {% for post in posts %}
            <div class="post-card">
                <h3>{{ post.species }} spotted in {{ post.location }}</h3>
                <p><strong>Date:</strong> {{ post.datetime }}</p>
                <p><strong>Activity:</strong> {{ post.activity }} ({{ post.duration }} min)</p>
                <p><strong>Posted by:</strong> {{ post.username }}</p>
                <p>{{ post.comment }}</p>
    
                {% if post.image_url %}
                    <img src="{{ post.image_url }}" alt="Image for {{ post.species }}">
                {% endif %}
    
                {% if post.username == session['username'] %}
                <div class="post-actions">
                    <button class="edit-btn">Edit</button>
                    <button class="delete-btn">Delete</button>
                </div>
                {% endif %}
            </div>
        {% endfor %}
    </div>
    

        <!-- Loop through each post -->
    {% for post in posts %}
    <div class="post-card">
        <h3>{{ post.species }} spotted in {{ post.location }}</h3>
        <p><strong>Date:</strong> {{ post.datetime }}</p>
        <p><strong>Activity:</strong> {{ post.activity }} ({{ post.duration }} min)</p>
        <p><strong>Posted by:</strong> {{ post.username }}</p>
        <p>{{ post.comment }}</p>

        <!-- Optional image -->
        {% if post.image_url %}
            <img src="{{ post.image_url }}" alt="Image for {{ post.species }}">
        {% endif %}

        <!-- Show Edit/Delete only if it's the current user -->
        {% if post.username == session['username'] %}
        <div class="post-actions">
            <button>Edit</button>
            <button>Delete</button>
        </div>
        {% endif %}
    </div>
    {% endfor %}

</section>
{% endblock %}
